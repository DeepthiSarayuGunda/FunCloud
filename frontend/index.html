<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FunCloud</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>
</head>
<body>
 <header class="topbar">
  <div class="brand">
    <div class="logo">â˜ï¸</div>
    <div class="brandText">
      <div class="brandName">FunCloud</div>
      <div class="brandTag">Inspiration, learning, and celebrations â€” all in one cloud experience.</div>
    </div>
  </div>
</header>

    <nav class="nav" aria-label="Primary navigation">
      <button class="navBtn isActive" type="button" data-page="quotes">Quotes</button>
      <button class="navBtn" type="button" data-page="kids">Kids Zone</button>
      <button class="navBtn" type="button" data-page="party">Party Planner</button>
        <button class="navBtn" type="button" data-page="chat">Chat</button>
    </nav>
  </header>

  <main class="container">
    <!-- PAGE: QUOTES -->
    <section class="page isActive" id="page-quotes" aria-label="Quotes page">
      <div class="card">
        <div class="moodRow">
          <div class="mood" id="moodLabel">calm</div>
          <div class="pill">Adult Zone</div>
        </div>

        <h1 class="title">Inspire Me</h1>
        <p class="subtitle">Click New Quote. Save favourites. Change category.</p>

        <div id="quote" class="quote">Click â€œNew Quoteâ€ to get inspired.</div>
        <div id="status" class="status"></div>

        <div class="buttons">
          <button id="btnQuote" type="button">New Quote</button>
          <button id="btnFav" type="button">Save Favourite</button>
          <button id="btnShow" type="button">Favourites</button>
        </div>

        <div class="row">
          <label for="category">Category</label>
          <select id="category">
            <option value="all">All</option>
            <option value="focus">Focus</option>
            <option value="confidence">Confidence</option>
            <option value="calm">Calm</option>
            <option value="success">Success</option>
          </select>
        </div>
      </div>

      <section id="panel" class="panel hidden" aria-label="Favourites panel">
        <div class="panelHead">
          <h2 class="h2">Favourites</h2>
          <button id="btnClose" class="btn small" type="button">Close</button>
        </div>

        <ul id="favList" class="favList"></ul>

        <div class="panelActions">
          <button id="btnClear" class="btn danger" type="button">Clear All</button>
        </div>
      </section>
    </section>

    <!-- PAGE: KIDS -->
    <section class="page" id="page-kids" aria-label="Kids Zone page">
      <section class="kidsZone" aria-label="Kids Zone">
        <div class="kidsHeader">
          <div class="kidsBadge">Kids Zone</div>
          <h2 class="kidsTitle">World Explorer</h2>
          <p class="kidsSubtitle">Pick a world, then tap an item to see an animation and fun facts.</p>
        </div>

        <div class="kidsCategories" role="tablist" aria-label="Kids world tabs">
          <button class="kidBtn kzTab isActive" type="button" data-zone="animals" role="tab" aria-selected="true">Animals</button>
          <button class="kidBtn kzTab" type="button" data-zone="space" role="tab" aria-selected="false">Space</button>
          <button class="kidBtn kzTab" type="button" data-zone="dinosaurs" role="tab" aria-selected="false">Dinosaurs</button>
          <button class="kidBtn kzTab" type="button" data-zone="ocean" role="tab" aria-selected="false">Ocean</button>
        </div>

        <div id="kidsExplorer" class="animalExplorer" aria-label="Explorer content">
          <div class="explorerTop">
            <h3 class="explorerTitle" id="explorerTitle">Animal World Explorer</h3>
            <div class="explorerRight">
              <button id="kidsSoundToggle" class="miniBtn" type="button" aria-pressed="true">Sound: On</button>
              <button id="closeExplorerBtn" class="miniBtn" type="button">Hide</button>
            </div>
          </div>

          <!-- Animals -->
          <div class="kzPanel" data-zone="animals" role="tabpanel">
            <div class="grid" role="list">
              <button class="tile kzItem" type="button" data-zone="animals" data-item="lion" role="listitem">
                <div class="tileEmoji">ğŸ¦</div><div class="tileName">Lion</div><div class="tileHint">Tap</div>
              </button>
              <button class="tile kzItem" type="button" data-zone="animals" data-item="elephant" role="listitem">
                <div class="tileEmoji">ğŸ˜</div><div class="tileName">Elephant</div><div class="tileHint">Tap</div>
              </button>
              <button class="tile kzItem" type="button" data-zone="animals" data-item="dolphin" role="listitem">
                <div class="tileEmoji">ğŸ¬</div><div class="tileName">Dolphin</div><div class="tileHint">Tap</div>
              </button>
            </div>
          </div>

          <!-- Space -->
          <div class="kzPanel hidden" data-zone="space" role="tabpanel">
            <div class="grid" role="list">
              <button class="tile kzItem" type="button" data-zone="space" data-item="rocket" role="listitem">
                <div class="tileEmoji">ğŸš€</div><div class="tileName">Rocket</div><div class="tileHint">Tap</div>
              </button>
              <button class="tile kzItem" type="button" data-zone="space" data-item="planet" role="listitem">
                <div class="tileEmoji">ğŸª</div><div class="tileName">Planet</div><div class="tileHint">Tap</div>
              </button>
              <button class="tile kzItem" type="button" data-zone="space" data-item="astronaut" role="listitem">
                <div class="tileEmoji">ğŸ§‘â€ğŸš€</div><div class="tileName">Astronaut</div><div class="tileHint">Tap</div>
              </button>
            </div>
          </div>

          <!-- Dinosaurs -->
          <div class="kzPanel hidden" data-zone="dinosaurs" role="tabpanel">
            <div class="grid" role="list">
              <button class="tile kzItem" type="button" data-zone="dinosaurs" data-item="trex" role="listitem">
                <div class="tileEmoji">ğŸ¦–</div><div class="tileName">T-Rex</div><div class="tileHint">Tap</div>
              </button>
              <button class="tile kzItem" type="button" data-zone="dinosaurs" data-item="sauropod" role="listitem">
                <div class="tileEmoji">ğŸ¦•</div><div class="tileName">Sauropod</div><div class="tileHint">Tap</div>
              </button>
              <button class="tile kzItem" type="button" data-zone="dinosaurs" data-item="egg" role="listitem">
                <div class="tileEmoji">ğŸ¥š</div><div class="tileName">Dino Egg</div><div class="tileHint">Tap</div>
              </button>
            </div>
          </div>

          <!-- Ocean -->
          <div class="kzPanel hidden" data-zone="ocean" role="tabpanel">
            <div class="grid" role="list">
              <button class="tile kzItem" type="button" data-zone="ocean" data-item="shark" role="listitem">
                <div class="tileEmoji">ğŸ¦ˆ</div><div class="tileName">Shark</div><div class="tileHint">Tap</div>
              </button>
              <button class="tile kzItem" type="button" data-zone="ocean" data-item="octopus" role="listitem">
                <div class="tileEmoji">ğŸ™</div><div class="tileName">Octopus</div><div class="tileHint">Tap</div>
              </button>
              <button class="tile kzItem" type="button" data-zone="ocean" data-item="turtle" role="listitem">
                <div class="tileEmoji">ğŸ¢</div><div class="tileName">Turtle</div><div class="tileHint">Tap</div>
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Story Books Section -->
      <section class="kidsZone" aria-label="Story Books">
        <div class="kidsHeader">
          <div class="kidsBadge">Story Books</div>
          <h2 class="kidsTitle">Bedtime Stories</h2>
          <p class="kidsSubtitle">Dive into magical tales. Flip through pages with beautiful illustrations.</p>
        </div>
        <div id="storyBooks" class="grid" role="list"></div>
      </section>

      <!-- Learning Videos Section -->
      <section class="kidsZone" aria-label="Learning Videos">
        <div class="kidsHeader">
          <div class="kidsBadge">Videos</div>
          <h2 class="kidsTitle">Learning Videos</h2>
          <p class="kidsSubtitle">Watch fun educational videos about letters, numbers, and more!</p>
        </div>
        <div id="videoGrid" class="grid" role="list"></div>
      </section>

      <!-- 3D Learn & Play Section -->
      <section class="kidsZone" aria-label="3D Topics">
        <div class="kidsHeader">
          <div class="kidsBadge">3D Learn & Play</div>
          <h2 class="kidsTitle">Interactive 3D Topics</h2>
          <p class="kidsSubtitle">Explore amazing topics with interactive facts and animations.</p>
        </div>
        <div id="threeGrid" class="grid" role="list"></div>
      </section>
    </section>

    <!-- PAGE: PARTY -->
    <section class="page" id="page-party" aria-label="Party Planner page">
      <div class="card">
        <div class="moodRow">
          <div class="pill">Parents + Kids</div>
          <div class="pill soft">Interactive Wizard</div>
        </div>

        <h1 class="title">Birthday Party Planner</h1>
        <p class="subtitle">Follow 5 steps to create your perfect party plan with checklists & timeline.</p>

        <div id="partyWizard" class="wizard"></div>
      </div>
    </section>
    <!-- PAGE: CHAT -->
    <section class="page" id="page-chat" aria-label="Chat page">
      <div class="card chatBox">
        <h1 class="title">Chat (Local demo)</h1>
        <p class="subtitle">A simple local chat view. Messages are stored in localStorage for this demo.</p>

        <ul id="chatMessages" class="chatMessages" aria-live="polite"></ul>

        <div id="chatChips" class="chipsRow" style="display:flex; gap:8px; flex-wrap:wrap; margin:12px 0;"></div>

        <div class="chatInputRow">
          <input id="chatName" class="chatInput" type="text" placeholder="Your name (optional)" style="max-width:180px" />
          <input id="chatInput" class="chatInput" type="text" placeholder="Type a messageâ€¦" />
          <button id="sendChatBtn" class="buttons" type="button">Send</button>
          <button id="clearChatBtn" class="btn small" type="button">Clear</button>
        </div>
      </div>
    </section>
  </main>

  <!-- MODAL FOR ALL CONTENT -->
  <div id="kzModal" class="modal hidden" aria-hidden="true">
    <div class="modalCard" role="dialog" aria-modal="true" aria-label="Content modal">
      <div class="modalTop">
        <div class="modalTitle" id="kzModalTitle">Content</div>
        <button id="kzModalClose" class="miniBtn" type="button">Close</button>
      </div>

      <!-- Modal Content Area - Dynamically Rendered -->
      <div id="modalContent" class="modalBody">
        <div style="text-align:center; padding:20px; color:#999;">Loading contentâ€¦</div>
      </div>
    </div>
  </div>

  <!-- LEGACY MODAL (For backwards compatibility with old animals/space explorer) -->
  <div id="kzLegacyModal" class="modal hidden" aria-hidden="true" style="display:none;">
    <div class="modalCard" role="dialog" aria-modal="true" aria-label="Explorer details">
      <div class="modalTop">
        <div class="modalTitle" id="kzLegacyTitle">Item</div>
        <button id="kzLegacyClose" class="miniBtn" type="button">Close</button>
      </div>

      <div class="media">
        <div class="animBox">
          <div class="animLabel">Animation</div>
          <div id="kzAnimPlaceholder" class="animPlaceholder">
            Loadingâ€¦
          </div>

          <img id="kzGif" class="gif hidden" src="" alt="Animation" />
          <video id="kzVideo" class="gif hidden" controls playsinline></video>
        </div>

        <div class="soundBox">
          <div class="animLabel">Sound</div>
          <div class="soundBtns">
            <button id="kzPlaySound" class="kidBtn small" type="button">Play</button>
            <button id="kzStopSound" class="kidBtn small outline" type="button">Stop</button>
          </div>
          <audio id="kzAudio" preload="auto"></audio>

        </div>
      </div>

      <div class="facts">
        <div class="factsHeader">Fun Facts</div>
        <ul id="kzFacts" class="factsList"></ul>
      </div>
    </div>
  </div>

  <!-- STORY READER MODAL -->
  <div id="storyReaderModal" class="modal hidden" aria-hidden="true">
    <div class="modalCard storyReaderCard" role="dialog" aria-modal="true" aria-label="Story Reader">
      <div class="storyReaderTop">
        <div class="storyReaderTitle" id="storyTitle">Story Title</div>
        <div class="storyReaderControls">
          <button id="storyToggle3D" class="miniBtn" type="button" title="Toggle 3D Mode">ğŸ¯ 3D</button>
          <button id="storyToggleSound" class="miniBtn" type="button" title="Toggle Sound">ğŸ”Š Sound</button>
          <button id="storyReaderClose" class="miniBtn" type="button">âœ•</button>
        </div>
      </div>

      <!-- Parallax Stage (Default View) -->
      <div id="storyParallaxStage" class="parallax-stage">
        <div class="parallax-layer parallax-background" id="storyBgLayer"></div>
        <div class="parallax-layer parallax-character" id="storyCharLayer"></div>
        <div class="parallax-layer parallax-foreground" id="storyFgLayer"></div>
        <div class="sparkle-container" id="sparkleContainer"></div>
      </div>

      <!-- 3D Scene Container (Hidden by default) -->
      <div id="storyScene3D" class="story-scene-3d hidden"></div>

      <!-- Story Text & Navigation -->
      <div class="storyReaderBottom">
        <div class="storyPageText" id="storyPageText">Loading story...</div>
        <div class="storyPageNav">
          <button id="storyPrevBtn" class="btn small" type="button">â† Previous</button>
          <div class="pageIndicator" id="pageIndicator">Page 1 of 6</div>
          <button id="storyNextBtn" class="btn small" type="button">Next â†’</button>
        </div>
        <div id="storyAiPrompt" class="story-ai-prompt">
          <span class="ai-icon">âœ¨</span>
          <span id="aiPromptText">AI Prompt: Loading...</span>
        </div>
      </div>
    </div>
  </div>

  <button onclick="testOllama()" style="position:fixed; bottom:20px; right:20px; z-index:999;">
    Test AI
  </button>

  <script src="data.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>
